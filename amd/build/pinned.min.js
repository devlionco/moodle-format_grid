
define(['jquery','format_grid/modal'],function($,modal){'use strict';const GRIDSECTIONS=document.querySelector(`.gridicons`);const MAXCOUNTSECTION=4;const pinnedWapper=GRIDSECTIONS.querySelector(`.pinnedsections`);const actionBlock=document.querySelector(`#gridshadebox`);const sections=Array.from(GRIDSECTIONS.querySelectorAll(`.gridicons li`));let pinnedSections=Array.from(GRIDSECTIONS.querySelectorAll(`.gridicons .pinned`));const refreshPinnedSection=()=>{pinnedSections=Array.from(GRIDSECTIONS.querySelectorAll(`.gridicons .pinned`));pinnedWapper.innerHTML=``;pinnedSections.forEach((item)=>{pinnedWapper.appendChild(item);});}
const addPinnedSection=(target)=>{while(!target.classList.contains(`section`)){target=target.parentNode;}
let sectionnumber=target.id.replace(/\D+/,'');let targetSection=document.querySelector(`a[id=gridsection-${sectionnumber}]`);targetSection.parentNode.classList.add('pinned');refreshPinnedSection();}
const removePinnedSection=(target)=>{while(!target.classList.contains(`section`)){target=target.parentNode;}
let sectionnumber=target.id.replace(/\D+/,'');let targetSection=document.querySelector(`a[id=gridsection-${sectionnumber}]`);targetSection.parentNode.classList.remove('pinned');refreshPinnedSection();}
const togglePinnedSectionIndicator=(target)=>{let buttonIndicator=target.firstChild;buttonIndicator.title;}
const checkMaxCountOfPinnedSection=()=>{return(pinnedWapper.childElementCount<MAXCOUNTSECTION)?1:0;}
return{init:function(){refreshPinnedSection();actionBlock.addEventListener('click',function(e){let target=e.target;while(!target.classList.contains(`gridcursor`)){if(target.dataset.action===`topinsection`){if(!checkMaxCountOfPinnedSection()){return;}
addPinnedSection(target);return}
if(target.dataset.action===`tounpinsection`){removePinnedSection(target);return}
target=target.parentNode;}});}};});