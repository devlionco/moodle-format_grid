
define(['jquery','format_grid/modal'],function($,modal){'use strict';const GRIDSECTIONS=document.querySelector(`.gridicons`);const MAXCOUNTSECTION=4;const pinnedWapper=GRIDSECTIONS.querySelector(`.pinnedsections`);const actionBlock=document.querySelector(`#gridshadebox`);const sections=Array.from(GRIDSECTIONS.querySelectorAll(`.gridicons li`));let pinnedSections=Array.from(GRIDSECTIONS.querySelectorAll(`.gridicons .pinned`));const refreshPinnedSection=()=>{pinnedSections=Array.from(GRIDSECTIONS.querySelectorAll(`.gridicons .pinned`));pinnedWapper.innerHTML=``;pinnedSections.forEach((item)=>{pinnedWapper.appendChild(item);});}
const getSectionId=(target)=>{while(!target.classList.contains(`section`)){target=target.parentNode;}
return sectionId=target.id.replace(/\D+/,'');}
const addPinnedSection=(target)=>{let sectionnumber=getSectionId(target);let targetSection=document.querySelector(`a[id=gridsection-${sectionnumber}]`);targetSection.parentNode.classList.add('pinned');refreshPinnedSection();}
const removePinnedSection=(target)=>{let sectionnumber=getSectionId(target);let targetSection=document.querySelector(`a[id=gridsection-${sectionnumber}]`);targetSection.parentNode.classList.remove('pinned');refreshPinnedSection();}
const togglePinnedSectionIndicator=(target)=>{let pinbefore;let pinafter;if(target.dataset.action===`topinsection`){pinbefore=1;pinafter=0;}else{pinbefore=0;pinafter=1;}
target.href="atik";}
const checkMaxCountOfPinnedSection=()=>{return(pinnedWapper.childElementCount<MAXCOUNTSECTION)?1:0;}
return{init:function(){refreshPinnedSection();actionBlock.addEventListener('click',function(e){let target=e.target;while(!target.classList.contains(`gridcursor`)){if(target.dataset.action===`topinsection`){if(!checkMaxCountOfPinnedSection()){return;}
togglePinnedSectionIndicator(target);addPinnedSection(target);return}
if(target.dataset.action===`tounpinsection`){togglePinnedSectionIndicator(target);removePinnedSection(target);return}
target=target.parentNode;}});}};});